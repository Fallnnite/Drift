<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Drift | Focus Tracker</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden; 
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .no-select { user-select: none; -webkit-user-select: none; }

        /* Wave Animation */
        @keyframes waveMove {
            0% { transform: translateX(0) translateZ(0) scaleY(1); }
            50% { transform: translateX(-25%) translateZ(0) scaleY(0.8); }
            100% { transform: translateX(-50%) translateZ(0) scaleY(1); }
        }
        .animate-wave {
            animation: waveMove 15s linear infinite;
        }
        .animate-wave-slow {
            animation: waveMove 25s linear infinite;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased h-screen w-full overflow-hidden">

<div id="root" class="w-full h-full flex relative overflow-hidden"></div>

<script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const THEMES = {
        blue: {
            id: 'blue', name: 'Ocean Blue',
            bgMain: 'bg-blue-600', bgHover: 'hover:bg-blue-700', bgLight: 'bg-blue-50',
            textMain: 'text-blue-600', textLight: 'text-blue-100',
            borderMain: 'border-blue-200', borderHover: 'hover:border-blue-200', borderFocus: 'focus:border-blue-400',
            ringActive: 'ring-blue-100', ringFocus: 'focus:ring-blue-100',
            shadowIcon: 'shadow-blue-200', shadowBtn: 'shadow-blue-600/30',
            gradient: 'from-blue-600 to-blue-800',
            waveColorClass: 'text-blue-100',
            patternClass: ''
        },
        mint: {
            id: 'mint', name: 'Fresh Mint',
            bgMain: 'bg-teal-500', bgHover: 'hover:bg-teal-600', bgLight: 'bg-teal-50',
            textMain: 'text-teal-600', textLight: 'text-teal-100',
            borderMain: 'border-teal-200', borderHover: 'hover:border-teal-200', borderFocus: 'focus:border-teal-400',
            ringActive: 'ring-teal-100', ringFocus: 'focus:ring-teal-100',
            shadowIcon: 'shadow-teal-200', shadowBtn: 'shadow-teal-500/30',
            gradient: 'from-teal-500 to-teal-700',
            waveColorClass: 'text-teal-100',
            patternClass: ''
        },
        lavender: {
            id: 'lavender', name: 'Lavender Night',
            bgMain: 'bg-indigo-500', bgHover: 'hover:bg-indigo-600', bgLight: 'bg-indigo-50',
            textMain: 'text-indigo-600', textLight: 'text-indigo-100',
            borderMain: 'border-indigo-200', borderHover: 'hover:border-indigo-200', borderFocus: 'focus:border-indigo-400',
            ringActive: 'ring-indigo-100', ringFocus: 'focus:ring-indigo-100',
            shadowIcon: 'shadow-indigo-200', shadowBtn: 'shadow-indigo-500/30',
            gradient: 'from-indigo-500 to-indigo-700',
            waveColorClass: 'text-indigo-100',
            patternClass: ''
        },
        coral: {
            id: 'coral', name: 'Coral Reef',
            bgMain: 'bg-rose-500', bgHover: 'hover:bg-rose-600', bgLight: 'bg-rose-50',
            textMain: 'text-rose-600', textLight: 'text-rose-100',
            borderMain: 'border-rose-200', borderHover: 'hover:border-rose-200', borderFocus: 'focus:border-rose-400',
            ringActive: 'ring-rose-100', ringFocus: 'focus:ring-rose-100',
            shadowIcon: 'shadow-rose-200', shadowBtn: 'shadow-rose-500/30',
            gradient: 'from-rose-500 to-orange-500',
            waveColorClass: 'text-rose-100',
            patternClass: 'bg-[radial-gradient(#cbd5e1_1px,transparent_1px)] [background-size:20px_20px]' 
        },
        navy: {
            id: 'navy', name: 'Deep Sea Grid',
            bgMain: 'bg-slate-700', bgHover: 'hover:bg-slate-800', bgLight: 'bg-slate-100',
            textMain: 'text-slate-700', textLight: 'text-slate-200',
            borderMain: 'border-slate-300', borderHover: 'hover:border-slate-400', borderFocus: 'focus:border-slate-500',
            ringActive: 'ring-slate-200', ringFocus: 'focus:ring-slate-200',
            shadowIcon: 'shadow-slate-300', shadowBtn: 'shadow-slate-700/30',
            gradient: 'from-slate-700 to-slate-900',
            waveColorClass: 'text-slate-200',
            patternClass: 'bg-[linear-gradient(to_right,#e2e8f0_1px,transparent_1px),linear-gradient(to_bottom,#e2e8f0_1px,transparent_1px)] bg-[size:24px_24px]'
        }
    };

    const formatTime = (totalSeconds) => {
        const absSecs = Math.abs(totalSeconds);
        const h = Math.floor(absSecs / 3600);
        const m = Math.floor((absSecs % 3600) / 60);
        const s = absSecs % 60;
        return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
    };

    const WaveSVG = ({ colorClass, className, speed = "animate-wave" }) => (
        <div className={`absolute left-0 w-[200%] h-20 pointer-events-none overflow-hidden ${className} ${colorClass}`}>
            <svg viewBox="0 0 1200 120" preserveAspectRatio="none" className={`w-full h-full ${speed}`}>
                <path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5,73.84-4.36,147.54,16.88,218.2,35.26,69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113,-1.11,1200,0H0Z" fill="currentColor"></path>
            </svg>
        </div>
    );

    function ProfileSetup({ theme, setProfile, existingProfile, onCancel }) {
        const [nickname, setNickname] = useState(existingProfile?.nickname || '');
        const [bio, setBio] = useState(existingProfile?.bio || '');

        const handleSubmit = (e) => {
            e.preventDefault();
            if (nickname.trim()) {
                const newId = existingProfile?.id || `CPT-${Math.random().toString(36).substr(2, 6).toUpperCase()}`;
                setProfile({ nickname: nickname.trim(), bio: bio.trim(), id: newId, isCreated: true });
            }
        };

        return (
            <div className={`flex flex-col absolute inset-0 overflow-y-auto ${theme.bgLight} items-center justify-center p-6`}>
                <div className="bg-white w-full max-w-sm rounded-3xl p-8 shadow-xl animate-[fadeIn_0.4s_ease-out] my-auto shrink-0 relative overflow-hidden text-center">
                    <WaveSVG colorClass={theme.textLight} className="top-0 rotate-180 opacity-40 h-12" />
                    <div className={`w-20 h-20 ${theme.bgLight} ${theme.textMain} rounded-full flex items-center justify-center text-4xl mx-auto mb-6 shadow-inner relative z-10`}>
                        <i className="fas fa-water"></i>
                    </div>
                    <h2 className="text-2xl font-bold text-slate-800 mb-2 relative z-10">{existingProfile?.isCreated ? 'Edit Profile' : 'Welcome to Drift'}</h2>
                    <p className="text-sm text-slate-500 mb-8 relative z-10">{existingProfile?.isCreated ? 'Update your captain details.' : 'Let\'s set up your profile to start drifting into focus.'}</p>
                    
                    <form onSubmit={handleSubmit} className="space-y-5 relative z-10 text-left">
                        <div>
                            <label className="block text-xs font-bold text-slate-500 uppercase mb-2 ml-1">Nickname</label>
                            <input required type="text" value={nickname} onChange={e => setNickname(e.target.value)} className={`w-full border-2 border-slate-100 p-3.5 rounded-xl outline-none ${theme.borderFocus} focus:bg-slate-50 transition-colors font-semibold text-slate-700`} placeholder="e.g., Captain" />
                        </div>
                        <div>
                            <label className="block text-xs font-bold text-slate-500 uppercase mb-2 ml-1">Bio / Motivation</label>
                            <textarea value={bio} onChange={e => setBio(e.target.value)} className={`w-full border-2 border-slate-100 p-3.5 rounded-xl outline-none ${theme.borderFocus} focus:bg-slate-50 resize-none h-24 text-slate-600`} placeholder="What keeps you moving?"></textarea>
                        </div>
                        <div className="pt-2 flex gap-3">
                            {existingProfile?.isCreated && (
                                <button type="button" onClick={onCancel} className="flex-1 bg-slate-100 text-slate-600 font-bold py-3.5 rounded-xl hover:bg-slate-200 transition-all">Cancel</button>
                            )}
                            <button type="submit" className={`flex-[2] ${theme.bgMain} text-white font-bold py-3.5 rounded-xl shadow-lg ${theme.shadowBtn} ${theme.bgHover} transition-all`}>
                                {existingProfile?.isCreated ? 'Save Changes' : 'Start Drifting'}
                            </button>
                        </div>
                    </form>
                    <WaveSVG colorClass={theme.textLight} className="bottom-0 opacity-40 h-12" />
                </div>
            </div>
        );
    }

    function App() {
        const [activeTab, setActiveTab] = useState('courses');
        const [isSidebarOpen, setIsSidebarOpen] = useState(false);
        
        const [profile, setProfile] = useState(() => {
            const saved = localStorage.getItem('drift-profile');
            return saved ? JSON.parse(saved) : { nickname: '', bio: '', id: '', isCreated: false };
        });
        
        const [voyages, setVoyages] = useState(() => {
            const saved = localStorage.getItem('drift-voyages');
            return saved ? JSON.parse(saved) : []; 
        });
        
        const [courses, setCourses] = useState(() => {
            const saved = localStorage.getItem('drift-courses');
            return saved ? JSON.parse(saved) : [];
        });

        const [crew, setCrew] = useState(() => {
            const saved = localStorage.getItem('drift-crew');
            return saved ? JSON.parse(saved) : [];
        });

        const [isAddCourseModalOpen, setIsAddCourseModalOpen] = useState(false);
        const [isAddVoyageModalOpen, setIsAddVoyageModalOpen] = useState(false);
        
        const [themeId, setThemeId] = useState(() => localStorage.getItem('drift-theme') || 'blue');
        const theme = THEMES[themeId];
        const [isEditingProfile, setIsEditingProfile] = useState(false);

        useEffect(() => { localStorage.setItem('drift-profile', JSON.stringify(profile)); }, [profile]);
        useEffect(() => { localStorage.setItem('drift-voyages', JSON.stringify(voyages)); }, [voyages]);
        useEffect(() => { localStorage.setItem('drift-courses', JSON.stringify(courses)); }, [courses]);
        useEffect(() => { localStorage.setItem('drift-crew', JSON.stringify(crew)); }, [crew]);
        useEffect(() => { localStorage.setItem('drift-theme', themeId); }, [themeId]);

        useEffect(() => {
            const interval = setInterval(() => {
                setCourses(prevCourses => prevCourses.map(course => {
                    if (course.isRunning && !course.isCompleted) {
                        return { ...course, timeSpent: course.timeSpent + 1 };
                    }
                    return course;
                }));
            }, 1000);
            return () => clearInterval(interval);
        }, []);

        const toggleTimer = (courseId) => {
            setCourses(courses.map(c => c.id === courseId ? { ...c, isRunning: !c.isRunning } : c));
        };

        const completeCourse = (courseId) => {
            setCourses(courses.map(c => c.id === courseId ? { ...c, isCompleted: true, isRunning: false } : c));
        };

        const toggleGoal = (courseId, goalId) => {
            setCourses(courses.map(c => {
                if (c.id === courseId) {
                    return { ...c, goals: c.goals.map(g => g.id === goalId ? { ...g, isCompleted: !g.isCompleted } : g) };
                }
                return c;
            }));
        };

        const handleAddVoyage = (name) => {
            setVoyages([...voyages, { id: Date.now().toString(), name }]);
            setIsAddVoyageModalOpen(false);
        };
        
        const clearData = () => {
            if(confirm("Delete all data? This cannot be undone.")) {
                setCourses([]);
                setVoyages([]);
                setCrew([]);
                setProfile({ nickname: '', bio: '', id: '', isCreated: false });
                localStorage.clear();
            }
        }

        const handleNavClick = (tab) => {
            setActiveTab(tab);
            setIsSidebarOpen(false);
        };

        if (!profile.isCreated || isEditingProfile) {
            return <ProfileSetup theme={theme} setProfile={(p) => { setProfile(p); setIsEditingProfile(false); }} existingProfile={profile} onCancel={() => setIsEditingProfile(false)} />;
        }

        return (
            <div className="flex h-full w-full bg-slate-50 transition-colors duration-500 relative">
                
                {/* Mobile Overlay Background */}
                {isSidebarOpen && (
                    <div 
                        className="fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 lg:hidden animate-[fadeIn_0.3s_ease-out]"
                        onClick={() => setIsSidebarOpen(false)}
                    ></div>
                )}

                {/* Sidebar Navigation */}
                <aside className={`fixed inset-y-0 left-0 z-50 w-72 shrink-0 ${theme.bgMain} text-white flex flex-col shadow-2xl transition-transform duration-500 ease-in-out lg:relative lg:translate-x-0 ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'} overflow-hidden`}>
                    <WaveSVG colorClass="text-white/20" className="bottom-0 h-40 opacity-40" />
                    <WaveSVG colorClass="text-white/10" className="bottom-4 h-32 opacity-20" speed="animate-wave-slow" />

                    <div className="p-6 pb-4 flex items-center gap-3 border-b border-white/10 relative z-10">
                        <div className="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center text-xl backdrop-blur-sm shadow-inner shrink-0">
                            <i className="fas fa-water"></i>
                        </div>
                        <h1 className="text-2xl font-bold tracking-tight">Drift</h1>
                        <button onClick={() => setIsSidebarOpen(false)} className="lg:hidden ml-auto w-10 h-10 flex items-center justify-center rounded-xl bg-white/10 hover:bg-white/20 active:scale-95 transition-all text-white/80 hover:text-white">
                            <i className="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <div className="p-6 pb-2 relative z-10">
                        <div className="text-xs font-bold text-white/50 uppercase tracking-widest mb-4 ml-1">Explore</div>
                        <nav className="flex flex-col gap-2">
                            <button onClick={() => handleNavClick('courses')} className={`flex items-center gap-3 w-full p-3.5 rounded-xl transition-all ${activeTab === 'courses' ? `bg-white ${theme.textMain} shadow-lg font-bold scale-105` : 'text-white/80 hover:bg-white/10 hover:text-white font-medium'}`}>
                                <i className="fas fa-wind text-lg w-5 text-center"></i>
                                <span>Current Courses</span>
                            </button>
                            <button onClick={() => handleNavClick('crew')} className={`flex items-center gap-3 w-full p-3.5 rounded-xl transition-all ${activeTab === 'crew' ? `bg-white ${theme.textMain} shadow-lg font-bold scale-105` : 'text-white/80 hover:bg-white/10 hover:text-white font-medium'}`}>
                                <i className="fas fa-users text-lg w-5 text-center"></i>
                                <span>The Fleet</span>
                            </button>
                            <button onClick={() => handleNavClick('analytics')} className={`flex items-center gap-3 w-full p-3.5 rounded-xl transition-all ${activeTab === 'analytics' ? `bg-white ${theme.textMain} shadow-lg font-bold scale-105` : 'text-white/80 hover:bg-white/10 hover:text-white font-medium'}`}>
                                <i className="fas fa-chart-line text-lg w-5 text-center"></i>
                                <span>Tide Charts</span>
                            </button>
                            <button onClick={() => handleNavClick('settings')} className={`flex items-center gap-3 w-full p-3.5 rounded-xl transition-all ${activeTab === 'settings' ? `bg-white ${theme.textMain} shadow-lg font-bold scale-105` : 'text-white/80 hover:bg-white/10 hover:text-white font-medium'}`}>
                                <i className="fas fa-sliders text-lg w-5 text-center"></i>
                                <span>Docking</span>
                            </button>
                        </nav>
                    </div>

                    <div className="mt-auto p-6 border-t border-white/10 relative z-10">
                        <div className="flex items-center gap-3 p-3 bg-white/10 rounded-xl cursor-pointer hover:bg-white/20 transition-all backdrop-blur-md" onClick={() => handleNavClick('settings')}>
                            <div className="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center text-lg shadow-inner shrink-0"><i className="fas fa-user-astronaut"></i></div>
                            <div className="flex flex-col overflow-hidden">
                                <span className="font-bold truncate">{profile.nickname}</span>
                                <span className="text-[10px] text-white/60 uppercase tracking-tighter">Captain</span>
                            </div>
                        </div>
                    </div>
                </aside>

                <div className="flex-1 flex flex-col h-full overflow-hidden relative">
                    <header className="bg-white/70 backdrop-blur-xl border-b border-slate-200 p-4 sm:p-6 lg:px-10 flex flex-wrap gap-4 justify-between items-center shrink-0 z-10">
                        <div className="flex items-center gap-4">
                            <button onClick={() => setIsSidebarOpen(true)} className={`lg:hidden w-11 h-11 rounded-2xl ${theme.bgLight} ${theme.textMain} flex items-center justify-center shadow-sm active:scale-95 transition-all`}>
                                <i className="fas fa-bars text-xl"></i>
                            </button>
                            <div className="relative">
                                <h2 className="text-xl sm:text-2xl font-bold text-slate-800">
                                    {activeTab === 'courses' && 'Active Courses'}
                                    {activeTab === 'crew' && 'Fleet Radar'}
                                    {activeTab === 'analytics' && 'Tide Analysis'}
                                    {activeTab === 'settings' && 'Docking Settings'}
                                </h2>
                                <div className={`h-1 w-12 ${theme.bgMain} rounded-full mt-1 transition-all duration-500 hidden sm:block`}></div>
                            </div>
                        </div>
                        {activeTab === 'courses' && voyages.length > 0 && (
                            <button onClick={() => setIsAddCourseModalOpen(true)} className={`${theme.bgMain} text-white px-5 sm:px-6 py-2.5 sm:py-3 rounded-xl font-bold shadow-lg hover:shadow-2xl hover:-translate-y-1 active:scale-95 transition-all flex items-center gap-2 group text-sm sm:text-base ml-auto`}>
                                <i className="fas fa-plus group-hover:rotate-90 transition-transform"></i> <span className="hidden sm:inline">New Course</span><span className="sm:hidden">Course</span>
                            </button>
                        )}
                    </header>

                    <main className={`flex-1 overflow-y-auto p-4 sm:p-6 lg:p-10 bg-slate-50/30 relative ${theme.patternClass}`}>
                        <div className="max-w-7xl mx-auto h-full relative z-10">
                            {activeTab === 'courses' && <CoursesView theme={theme} voyages={voyages} courses={courses} addNewVoyage={() => setIsAddVoyageModalOpen(true)} toggleTimer={toggleTimer} completeCourse={completeCourse} toggleGoal={toggleGoal} />}
                            {activeTab === 'crew' && <CrewView theme={theme} profile={profile} crew={crew} setCrew={setCrew} />}
                            {activeTab === 'analytics' && <AnalyticsView theme={theme} courses={courses} />}
                            {activeTab === 'settings' && <SettingsView theme={theme} themeId={themeId} setThemeId={setThemeId} profile={profile} onEditProfile={() => setIsEditingProfile(true)} clearData={clearData} />}
                        </div>
                        <div className="fixed bottom-0 right-0 w-1/3 h-1/3 opacity-[0.03] pointer-events-none">
                            <i className="fas fa-water text-[20rem] -rotate-12"></i>
                        </div>
                    </main>
                </div>

                {isAddCourseModalOpen && <AddCourseModal theme={theme} voyages={voyages} onClose={() => setIsAddCourseModalOpen(false)} onAdd={(newCourse) => setCourses([...courses, newCourse])} />}
                {isAddVoyageModalOpen && <AddVoyageModal theme={theme} onClose={() => setIsAddVoyageModalOpen(false)} onAdd={handleAddVoyage} />}
            </div>
        );
    }

    function CoursesView({ theme, voyages, courses, addNewVoyage, toggleTimer, completeCourse, toggleGoal }) {
        if (voyages.length === 0) {
            return (
                <div className="flex flex-col items-center justify-center h-full text-center animate-[fadeIn_0.5s_ease-out]">
                    <div className={`w-32 h-32 ${theme.bgLight} ${theme.textMain} rounded-[2rem] flex items-center justify-center text-6xl shadow-inner mb-6 mx-auto`}>
                        <i className="fas fa-map"></i>
                    </div>
                    <h2 className="text-3xl font-black text-slate-800 mb-4">No Voyages Charted</h2>
                    <p className="text-slate-500 max-w-md mb-8 mx-auto">Establish a Voyage (folder) to group your courses (tasks).</p>
                    <button onClick={addNewVoyage} className={`${theme.bgMain} text-white px-8 py-4 rounded-2xl font-black shadow-xl ${theme.shadowBtn} ${theme.bgHover} hover:-translate-y-1 active:scale-95 transition-all flex items-center gap-3 mx-auto`}>
                        <i className="fas fa-map-location-dot"></i> Chart First Voyage
                    </button>
                </div>
            );
        }

        return (
            <div className="space-y-8 pb-10">
                {voyages.map(voyage => {
                    const voyageCourses = courses.filter(c => c.voyageId === voyage.id);
                    const completedVoyageCourses = voyageCourses.filter(c => c.isCompleted).length;
                    const voyageProgress = voyageCourses.length === 0 ? 0 : Math.round((completedVoyageCourses / voyageCourses.length) * 100);

                    return (
                        <div key={voyage.id} className="bg-white/80 rounded-3xl p-6 shadow-sm border border-slate-100 backdrop-blur-sm">
                            <div className="flex justify-between items-center mb-4">
                                <h2 className="font-bold text-slate-700 flex items-center gap-2 text-lg">
                                    <i className={`fas fa-map ${theme.textMain}`}></i> {voyage.name}
                                </h2>
                                <span className={`text-xs font-bold ${theme.textMain} ${theme.bgLight} px-3 py-1.5 rounded-full`}>{voyageProgress}% Complete</span>
                            </div>
                            
                            <div className="w-full bg-slate-100 rounded-full h-2.5 mb-6 overflow-hidden flex shadow-inner">
                                <div className={`${theme.bgMain} h-full rounded-full transition-all duration-1000 ease-out`} style={{ width: `${voyageProgress}%` }}></div>
                            </div>

                            <div className={voyageCourses.length === 0 ? "" : "grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"}>
                                {voyageCourses.length === 0 ? (
                                    <p className="text-sm text-slate-400 italic text-center py-10 bg-slate-50/50 rounded-2xl border border-dashed border-slate-200">No courses charted.</p>
                                ) : (
                                    voyageCourses.map(course => (
                                        <CourseCard key={course.id} theme={theme} course={course} toggleTimer={toggleTimer} completeCourse={completeCourse} toggleGoal={toggleGoal} />
                                    ))
                                )}
                            </div>
                        </div>
                    );
                })}
                <button onClick={addNewVoyage} className={`w-full py-8 border-2 border-dashed ${theme.borderMain} ${theme.textMain} rounded-3xl font-bold text-lg hover:bg-white hover:shadow-xl hover:border-solid transition-all active:scale-[0.99] flex items-center justify-center gap-3`}>
                    <i className="fas fa-ship"></i> Chart New Voyage
                </button>
            </div>
        );
    }

    function CourseCard({ theme, course, toggleTimer, completeCourse, toggleGoal }) {
        const [expanded, setExpanded] = useState(false);
        const timeLeft = course.duration - course.timeSpent;
        const isOvertime = timeLeft < 0;
        const progress = course.duration === 0 ? 0 : Math.min(1, course.timeSpent / course.duration);
        const goalProgress = course.goals.length === 0 ? 0 : Math.round((course.goals.filter(g => g.isCompleted).length / course.goals.length) * 100);

        return (
            <div className={`group border-2 rounded-3xl p-4 transition-all duration-500 relative overflow-hidden ${course.isCompleted ? 'bg-slate-50 opacity-60 border-slate-200 shadow-inner' : isOvertime && course.isRunning ? 'bg-red-50 border-red-300 shadow-lg ring-4 ring-red-100' : course.isRunning ? `${theme.bgLight} border-transparent shadow-xl ring-4 ${theme.ringActive}` : `bg-white border-slate-100 hover:border-blue-200 hover:shadow-md shadow-sm`}`}>
                {course.isRunning && !course.isCompleted && (
                   <WaveSVG colorClass={isOvertime ? 'text-red-100' : theme.waveColorClass} className="bottom-0 rotate-180 h-full opacity-40" />
                )}

                <div className="flex items-center justify-between relative z-10">
                    <div className="flex-1 cursor-pointer no-select pr-2" onClick={() => setExpanded(!expanded)}>
                        <div className="flex items-center gap-2">
                            <h3 className={`font-bold truncate text-base ${course.isCompleted ? 'line-through text-slate-400' : 'text-slate-800'}`}>{course.title}</h3>
                            {course.goals.length > 0 && !course.isCompleted && (
                                <span className="text-[10px] bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full font-bold">{course.goals.filter(g=>g.isCompleted).length}/{course.goals.length}</span>
                            )}
                        </div>
                        <div className="flex items-center gap-3 mt-2">
                            {!course.isCompleted && (
                                <div className="relative w-6 h-6 flex items-center justify-center shrink-0">
                                    <svg viewBox="0 0 32 32" className={`w-6 h-6 -rotate-90 ${isOvertime ? 'text-red-500' : theme.textMain}`}>
                                        <circle r="15" cx="16" cy="16" className="fill-slate-100/80 stroke-slate-200 stroke-1" />
                                        <circle r="7.5" cx="16" cy="16"
                                            fill="transparent"
                                            stroke="currentColor"
                                            strokeWidth="15"
                                            strokeDasharray={`${progress * 47.12} 47.12`}
                                            className="transition-all duration-1000 ease-linear" />
                                    </svg>
                                </div>
                            )}
                            <div className={`text-xl font-mono font-black tracking-tight transition-colors ${course.isCompleted ? 'text-slate-400' : isOvertime ? 'text-red-600' : theme.textMain}`}>
                                {isOvertime ? '+' : ''}{formatTime(timeLeft)}
                            </div>
                        </div>
                    </div>
                    {!course.isCompleted && (
                        <div className="flex flex-col gap-2 shrink-0">
                            <button onClick={() => toggleTimer(course.id)} className={`w-12 h-12 rounded-2xl flex items-center justify-center text-white shadow-lg transition-all active:scale-90 ${course.isRunning ? 'bg-red-500 hover:bg-red-600 shadow-red-200' : `${theme.bgMain} ${theme.bgHover} ${theme.shadowIcon}`}`}>
                                <i className={`fas ${course.isRunning ? 'fa-pause' : 'fa-play'} ${course.isRunning ? '' : 'ml-1'} text-lg`}></i>
                            </button>
                            <button onClick={() => completeCourse(course.id)} className="w-12 h-12 rounded-2xl bg-emerald-500 hover:bg-emerald-600 text-white flex items-center justify-center shadow-lg transition-all active:scale-90 shadow-emerald-200">
                                <i className="fas fa-check text-lg"></i>
                            </button>
                        </div>
                    )}
                </div>
                {expanded && (
                    <div className="mt-4 pt-4 border-t border-slate-200/50 animate-[fadeIn_0.3s_ease-out] relative z-10">
                        {course.description && <p className="text-sm text-slate-600 mb-5 whitespace-pre-wrap bg-slate-50 p-3 rounded-2xl border border-slate-100 leading-relaxed shadow-inner">{course.description}</p>}
                        <div className="mb-3 flex justify-between items-center">
                            <h4 className="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-2"><i className="fas fa-stream"></i> Course Goals</h4>
                            <span className={`text-[10px] font-black ${theme.textMain} ${theme.bgLight} px-2 py-0.5 rounded-full`}>{goalProgress}%</span>
                        </div>
                        <div className="w-full flex gap-1.5 h-1.5 mb-4">
                            {course.goals.map((g, i) => (
                                <div key={g.id} className={`flex-1 rounded-full transition-all duration-500 ${g.isCompleted ? 'bg-emerald-400 shadow-sm' : 'bg-slate-200'}`}></div>
                            ))}
                        </div>
                        <div className="space-y-2 mb-2">
                            {course.goals.map(g => (
                                <label key={g.id} className={`flex items-start justify-between gap-3 text-sm cursor-pointer p-3 rounded-2xl border-2 transition-all ${g.isCompleted ? 'bg-slate-50 border-transparent' : 'bg-white border-slate-50 hover:border-slate-200 shadow-sm'}`}>
                                    <div className="flex items-start gap-4 flex-1">
                                        <div className="pt-0.5">
                                            <input type="checkbox" checked={g.isCompleted} onChange={() => toggleGoal(course.id, g.id)} className="w-5 h-5 text-emerald-500 rounded-lg border-slate-300 focus:ring-emerald-500 cursor-pointer shadow-inner" />
                                        </div>
                                        <span className={`flex-1 pt-0.5 ${g.isCompleted ? 'line-through text-slate-400' : 'text-slate-700 font-bold'}`}>{g.text}</span>
                                    </div>
                                    <span className={`text-[11px] font-mono font-black shrink-0 pt-1 ${g.isCompleted ? 'text-slate-300' : theme.textMain}`}>{formatTime(g.duration)}</span>
                                </label>
                            ))}
                        </div>
                    </div>
                )}
            </div>
        );
    }

    function CrewView({ theme, profile, crew, setCrew }) {
        const [newFriendId, setNewFriendId] = useState('');
        const handleAddFriend = (e) => {
            e.preventDefault();
            const id = newFriendId.trim().toUpperCase();
            if (!id || id === profile.id || crew.find(c => c.id === id)) return;
            const mockTitles = ["Navigator", "First Mate", "Lookout", "Deckhand"];
            const randomTitle = mockTitles[Math.floor(Math.random() * mockTitles.length)];
            const mockActivities = ["Deep Work", "Studying", "Reading", "Coding"];
            setCrew([...crew, {
                id, nickname: `${randomTitle} ${id.substring(id.length - 4)}`, isSailing: Math.random() > 0.4,
                currentCourse: mockActivities[Math.floor(Math.random() * mockActivities.length)], progress: Math.floor(Math.random() * 100)
            }]);
            setNewFriendId('');
        };
        return (
            <div className="space-y-10 max-w-5xl mx-auto pb-20 animate-[fadeIn_0.5s_ease-out]">
                <div className={`bg-gradient-to-br ${theme.gradient} rounded-[3rem] p-10 shadow-xl relative overflow-hidden flex flex-col md:flex-row items-center justify-between gap-8 text-white`}>
                    <WaveSVG colorClass="text-white/10" className="bottom-0 h-32 opacity-40" />
                    <div className="relative z-10 text-center md:text-left">
                        <h3 className="text-white/80 font-black mb-2 text-xs uppercase tracking-[0.3em]">Your Captain ID</h3>
                        <div className="text-4xl md:text-5xl font-black font-mono tracking-widest drop-shadow-lg select-all bg-black/20 px-6 py-4 rounded-3xl border border-white/20 inline-block">{profile.id}</div>
                    </div>
                    <div className="relative z-10 w-full md:w-auto bg-white/10 p-6 rounded-[2rem] border border-white/20 backdrop-blur-md">
                        <form onSubmit={handleAddFriend} className="flex flex-col gap-4">
                            <label className="text-xs font-black uppercase tracking-widest text-white/80">Add Crewmate</label>
                            <div className="flex gap-2">
                                <input type="text" value={newFriendId} onChange={e=>setNewFriendId(e.target.value)} placeholder="e.g. CPT-XYZ123" className="w-full bg-black/20 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-white/40 outline-none font-mono uppercase" />
                                <button type="submit" className="bg-white text-slate-800 px-6 py-3 rounded-xl font-black"><i className="fas fa-user-plus"></i></button>
                            </div>
                        </form>
                    </div>
                </div>
                <div className="bg-white rounded-[3rem] p-10 shadow-sm border border-slate-100 relative overflow-hidden">
                    <h3 className="text-2xl font-black text-slate-800 tracking-tight flex items-center gap-3 mb-10"><i className={`fas fa-radar ${theme.textMain}`}></i> Global Radar</h3>
                    {crew.length === 0 ? (
                        <div className="text-center py-16 bg-slate-50 rounded-3xl border border-dashed border-slate-200"><p className="text-slate-500 font-bold">Your radar is empty. Add a crewmate ID.</p></div>
                    ) : (
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {crew.map(mate => (
                                <div key={mate.id} className="border-2 border-slate-100 rounded-[2rem] p-6 relative overflow-hidden group">
                                    <div className="flex justify-between items-start mb-6">
                                        <div className="flex items-center gap-4">
                                            <div className="w-12 h-12 bg-slate-100 text-slate-500 rounded-2xl flex items-center justify-center text-xl shadow-inner"><i className="fas fa-user-astronaut"></i></div>
                                            <div><h4 className="font-bold text-slate-800 text-lg">{mate.nickname}</h4><span className="text-[10px] font-mono text-slate-400">{mate.id}</span></div>
                                        </div>
                                        <button onClick={() => setCrew(crew.filter(c => c.id !== mate.id))} className="text-slate-300 hover:text-red-500"><i className="fas fa-times"></i></button>
                                    </div>
                                    <div className="flex justify-between text-xs font-black uppercase tracking-widest mb-2"><span className={mate.isSailing ? theme.textMain : 'text-slate-400'}>{mate.isSailing ? `Sailing: ${mate.currentCourse}` : 'Docked'}</span></div>
                                    <div className="w-full bg-slate-100 rounded-full h-2 overflow-hidden flex shadow-inner">
                                        <div className={`h-full ${mate.isSailing ? theme.bgMain : 'bg-slate-300'}`} style={{ width: `${mate.isSailing ? mate.progress : 100}%` }}></div>
                                    </div>
                                    {mate.isSailing && <div className={`absolute top-0 right-0 w-full h-full opacity-10 bg-gradient-to-l ${theme.gradient} animate-[shimmer_3s_infinite] pointer-events-none`}></div>}
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            </div>
        );
    }

    function AddCourseModal({ theme, voyages, onClose, onAdd }) {
        const [title, setTitle] = useState('');
        const [desc, setDesc] = useState('');
        const [hrs, setHrs] = useState('');
        const [mins, setMins] = useState('30');
        const [voyageId, setVoyageId] = useState(voyages[0]?.id || '');
        const [goals, setGoals] = useState([]);
        const [gText, setGText] = useState('');
        const [gHrs, setGHrs] = useState('');
        const [gMins, setGMins] = useState('15');

        const calculatedTotalSeconds = goals.reduce((acc, curr) => acc + curr.duration, 0);
        const hasGoals = goals.length > 0;

        const handleAddGoal = () => {
            if (!gText.trim()) return;
            const h = parseInt(gHrs) || 0;
            const m = parseInt(gMins) || 0;
            const durationSecs = (h * 3600) + (m * 60);
            if (durationSecs > 0) {
                setGoals([...goals, { id: Date.now(), text: gText, duration: durationSecs, isCompleted: false }]);
                setGText(''); setGMins('15'); setGHrs('');
            }
        };

        const handleSubmit = (e) => {
            e.preventDefault();
            let finalDuration = hasGoals ? calculatedTotalSeconds : ((parseInt(hrs) || 0) * 3600 + (parseInt(mins) || 0) * 60) || 60;
            onAdd({ id: Date.now(), voyageId, title, description: desc, duration: finalDuration, timeSpent: 0, isRunning: false, isCompleted: false, goals: goals });
            onClose();
        };

        return (
            <div className="absolute inset-0 z-50 bg-slate-900/40 backdrop-blur-md flex items-center justify-center p-4">
                <div className="bg-white w-full max-w-4xl rounded-[2.5rem] p-10 shadow-2xl animate-[slideUp_0.4s_ease-out] flex flex-col max-h-[90vh] relative overflow-hidden">
                    <WaveSVG colorClass={theme.textLight} className="top-0 rotate-180 opacity-40 h-16" />
                    
                    <div className="flex justify-between items-center mb-8 shrink-0 relative z-10">
                        <h2 className="text-3xl font-black text-slate-800 tracking-tight">Chart New Course</h2>
                        <button onClick={onClose} className="w-12 h-12 flex items-center justify-center rounded-2xl bg-slate-100 text-slate-500 hover:bg-slate-200 transition-all"><i className="fas fa-times"></i></button>
                    </div>
                    
                    <form onSubmit={handleSubmit} className="overflow-y-auto pr-4 flex-1 relative z-10 space-y-10">
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
                            <div className="space-y-8">
                                <div className="group">
                                    <label className="block text-[11px] font-black text-slate-400 uppercase tracking-[0.2em] mb-3 ml-1">Course Name</label>
                                    <input required type="text" value={title} onChange={e => setTitle(e.target.value)} className={`w-full border-b-4 border-slate-100 p-4 rounded-2xl outline-none ${theme.borderFocus} focus:bg-slate-50 transition-all text-xl font-bold bg-slate-50/50`} placeholder="What's the objective?" />
                                </div>
                                
                                <div className="bg-slate-50 border-2 border-slate-100 rounded-3xl p-6 shadow-inner flex flex-col">
                                    <label className="block text-[11px] font-black text-slate-400 uppercase tracking-[0.2em] mb-5 ml-1 flex justify-between shrink-0">
                                        <span><i className="fas fa-stream mr-2"></i> Goal Breakdown</span>
                                        {hasGoals && <span className={`${theme.textMain} bg-white px-3 py-1 rounded-full shadow-sm`}>{formatTime(calculatedTotalSeconds)} Total</span>}
                                    </label>
                                    
                                    {hasGoals && (
                                        <div className="space-y-3 mb-6 max-h-48 overflow-y-auto pr-2 shrink-0">
                                            {goals.map(g => (
                                                <div key={g.id} className="flex justify-between items-center bg-white p-4 rounded-2xl border border-slate-100 text-sm shadow-sm animate-[fadeIn_0.2s_ease-out]">
                                                    <span className="font-bold text-slate-700 truncate pr-4 flex-1">{g.text}</span>
                                                    <div className="flex items-center gap-4 shrink-0">
                                                        <span className={`font-mono font-black ${theme.textMain}`}>{formatTime(g.duration)}</span>
                                                        <button type="button" onClick={() => setGoals(goals.filter(m => m.id !== g.id))} className="text-red-400 hover:text-red-600 transition-colors"><i className="fas fa-trash-alt"></i></button>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}

                                    <div className="flex flex-col gap-4 bg-white p-5 rounded-2xl border border-slate-200 shadow-sm shrink-0">
                                        <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Add Checkpoint</label>
                                        <input type="text" value={gText} onChange={e => setGText(e.target.value)} className={`w-full text-sm border-2 border-slate-100 p-3.5 rounded-xl outline-none ${theme.borderFocus} bg-slate-50`} placeholder="E.g., Read chapter 1..." />
                                        <div className="flex flex-wrap sm:flex-nowrap gap-3 items-center">
                                            <div className="flex-1 flex gap-3 min-w-[140px]">
                                                <div className="relative flex-1">
                                                    <input type="number" min="0" placeholder="0" value={gHrs} onChange={e => setGHrs(e.target.value)} className={`w-full text-sm border-2 border-slate-100 p-3 pr-8 rounded-xl outline-none ${theme.borderFocus} font-mono text-center bg-slate-50`} />
                                                    <span className="absolute right-3 top-3.5 text-[10px] font-bold text-slate-400">H</span>
                                                </div>
                                                <div className="relative flex-1">
                                                    <input type="number" min="0" max="59" placeholder="15" value={gMins} onChange={e => setGMins(e.target.value)} className={`w-full text-sm border-2 border-slate-100 p-3 pr-8 rounded-xl outline-none ${theme.borderFocus} font-mono text-center bg-slate-50`} />
                                                    <span className="absolute right-3 top-3.5 text-[10px] font-bold text-slate-400">M</span>
                                                </div>
                                            </div>
                                            <button type="button" onClick={handleAddGoal} className={`w-full sm:w-auto px-6 py-3 ${theme.bgMain} text-white font-black text-xs uppercase tracking-widest rounded-xl hover:shadow-lg active:scale-95 transition-all shrink-0`}>
                                                Add
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className="space-y-10">
                                {!hasGoals && (
                                    <div className="animate-[fadeIn_0.3s_ease-out]">
                                        <label className="block text-[11px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4 ml-1">Overall Duration</label>
                                        <div className="flex gap-4">
                                            <div className="flex-1 relative">
                                                <input type="number" min="0" placeholder="0" value={hrs} onChange={e => setHrs(e.target.value)} className={`w-full border-b-4 border-slate-100 p-5 pr-10 rounded-2xl outline-none ${theme.borderFocus} font-mono text-center text-2xl bg-slate-50/50 transition-all`} />
                                                <span className="absolute right-5 top-6 text-xs font-black text-slate-300">HRS</span>
                                            </div>
                                            <div className="flex-1 relative">
                                                <input type="number" min="0" max="59" placeholder="30" value={mins} onChange={e => setMins(e.target.value)} className={`w-full border-b-4 border-slate-100 p-5 pr-10 rounded-2xl outline-none ${theme.borderFocus} font-mono text-center text-2xl bg-slate-50/50 transition-all`} />
                                                <span className="absolute right-5 top-6 text-xs font-black text-slate-300">MIN</span>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                <div>
                                    <label className="block text-[11px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4 ml-1">Captain's Log (Notes)</label>
                                    <textarea value={desc} onChange={e => setDesc(e.target.value)} className={`w-full border-b-4 border-slate-100 p-5 rounded-3xl outline-none ${theme.borderFocus} focus:bg-slate-50 resize-none h-32 bg-slate-50/50 transition-all font-medium`} placeholder="Any extra instructions for this course?"></textarea>
                                </div>

                                <div>
                                    <label className="block text-[11px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4 ml-1">Voyage Assignment</label>
                                    <div className="relative">
                                        <select value={voyageId} onChange={e => setVoyageId(e.target.value)} className={`w-full border-b-4 border-slate-100 p-5 rounded-2xl outline-none ${theme.borderFocus} focus:bg-slate-50 bg-slate-50/50 appearance-none font-bold text-slate-700 transition-all`}>
                                            {voyages.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}
                                        </select>
                                        <i className="fas fa-chevron-down absolute right-6 top-6 text-slate-400 pointer-events-none"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="pt-10 border-t border-slate-100 flex justify-end">
                            <button type="submit" className={`w-full lg:w-auto lg:px-16 ${theme.bgMain} text-white font-black text-xl py-5 rounded-[2rem] shadow-2xl ${theme.shadowBtn} ${theme.bgHover} hover:-translate-y-2 active:scale-95 transition-all tracking-tight`}>
                                Launch Course
                            </button>
                        </div>
                    </form>
                    <WaveSVG colorClass={theme.textLight} className="bottom-0 opacity-40 h-16" />
                </div>
                <style>{"@keyframes slideUp { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } } @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }"}</style>
            </div>
        );
    }

    function AnalyticsView({ theme, courses }) {
        const totalTime = courses.reduce((a,c)=>a+c.timeSpent,0);
        return (
            <div className="space-y-8 max-w-6xl mx-auto pb-20">
                <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div className={`bg-gradient-to-br ${theme.gradient} rounded-[2.5rem] p-10 text-white relative overflow-hidden flex flex-col justify-center min-h-[200px] shadow-xl`}><WaveSVG colorClass="text-white/10" className="bottom-0 h-32" /><h3 className="text-white/60 font-black mb-2 text-xs uppercase tracking-widest relative z-10">Total Sailing Time</h3><div className="text-6xl font-black font-mono tracking-tighter relative z-10">{formatTime(totalTime)}</div></div>
                    <div className="bg-white p-10 rounded-[2.5rem] flex flex-col items-center justify-center shadow-sm"><span className="text-5xl font-black text-slate-800">{courses.length}</span><span className="text-xs font-black text-slate-300 uppercase mt-3">Courses</span></div>
                    <div className="bg-white p-10 rounded-[2.5rem] flex flex-col items-center justify-center shadow-sm"><span className="text-5xl font-black text-slate-800">{courses.filter(c=>c.isCompleted).length}</span><span className="text-xs font-black text-slate-300 uppercase mt-3">Anchored</span></div>
                </div>
            </div>
        );
    }

    function SettingsView({ theme, themeId, setThemeId, profile, onEditProfile, clearData }) {
        return (
            <div className="space-y-10 max-w-5xl mx-auto pb-20 animate-[fadeIn_0.5s_ease-out]">
                <div className="bg-white rounded-[3rem] p-10 shadow-sm border border-slate-100 flex flex-col sm:flex-row items-center gap-10 relative overflow-hidden">
                    <WaveSVG colorClass={theme.textLight} className="top-0 rotate-180 opacity-30 h-24" /><div className={`w-32 h-32 shrink-0 ${theme.bgLight} ${theme.textMain} rounded-[2rem] flex items-center justify-center text-6xl shadow-xl relative z-10`}><i className="fas fa-user-astronaut"></i></div>
                    <div className="flex-1 text-center sm:text-left relative z-10"><h2 className="text-4xl font-black text-slate-800 tracking-tighter">{profile.nickname}</h2><p className="text-slate-500 mt-4 italic text-xl font-medium">"{profile.bio}"</p></div>
                    <button onClick={onEditProfile} className={`${theme.bgLight} ${theme.textMain} px-8 py-4 rounded-2xl font-black relative z-10 text-xs tracking-widest uppercase`}>Edit Profile</button>
                </div>
                <div className="bg-white rounded-[3rem] p-10 shadow-sm border border-slate-100"><h3 className="text-xl font-black text-slate-800 mb-8">Vessel Appearance</h3><div className="flex flex-wrap gap-10 px-10">{Object.values(THEMES).map(t=><button key={t.id} onClick={()=>setThemeId(t.id)} className={`flex items-center gap-4 p-3 pr-6 rounded-3xl transition-all ${themeId === t.id ? 'bg-white shadow-xl ring-2 scale-110' : 'hover:bg-slate-50'}`}><div className={`w-12 h-12 rounded-2xl ${t.bgMain} flex items-center justify-center shadow-lg`}>{themeId === t.id && <i className="fas fa-check text-white"></i>}</div><span className="font-black text-[10px] uppercase">{t.name}</span></button>)}</div></div>
                <button onClick={clearData} className="w-full bg-red-50 text-red-600 font-black text-xs uppercase py-4 rounded-2xl border-2 border-red-100 hover:bg-red-500 hover:text-white transition-all tracking-widest">Abandon Ship (Wipe Data)</button>
            </div>
        );
    }

    function AddVoyageModal({ theme, onClose, onAdd }) {
        const [name, setName] = useState('');
        return (
            <div className="absolute inset-0 z-50 bg-slate-900/40 backdrop-blur-md flex items-center justify-center p-4">
                <div className="bg-white w-full max-w-sm rounded-3xl p-8 shadow-2xl">
                    <div className="flex justify-between items-center mb-6"><h2 className="text-2xl font-black text-slate-800">Chart New Voyage</h2><button onClick={onClose}><i className="fas fa-times"></i></button></div>
                    <form onSubmit={e=>{e.preventDefault(); if(name.trim()) onAdd(name.trim())}}><div className="mb-6"><label className="block text-[11px] font-black text-slate-400 uppercase mb-2">Voyage Name</label><input required autoFocus value={name} onChange={e=>setName(e.target.value)} className="w-full border-b-4 p-4 rounded-2xl font-bold bg-slate-50/50 outline-none" /></div><button type="submit" className={`w-full ${theme.bgMain} text-white font-black py-4 rounded-2xl`}>Create Voyage</button></form>
                </div>
            </div>
        );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>
</body>
</html>